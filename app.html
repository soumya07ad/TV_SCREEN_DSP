<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TV DSP Inspector</title>

<style>
body{
    margin:0;
    background:#222;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    font-family:Arial;
}

#phone{
    width:360px;
    height:640px;
    background:#f5f5f5;
    border-radius:25px;
    box-shadow:0 0 20px black;
    overflow:hidden;
    padding:10px;
    box-sizing:border-box;
}

h3{text-align:center;}

.btn{
    width:100%;
    height:45px;
    margin-top:8px;
    border:none;
    border-radius:6px;
    background:#1976d2;
    color:white;
    font-size:16px;
}

.row{
    display:flex;
    gap:6px;
}

.row button{
    flex:1;
}

canvas{
    background:white;
    width:100%;
    height:150px;
    margin-top:10px;
}

.pass{color:green;font-size:26px;font-weight:bold;text-align:center;}
.fail{color:red;font-size:26px;font-weight:bold;text-align:center;}

.small{text-align:center;font-size:14px;}
</style>
</head>

<body>

<div id="phone">

<h3>TV Screen DSP</h3>

<input type="file" id="fileInput">

<div class="row">
<button class="btn" onclick="noiseCheck()">Noise</button>
<button class="btn" onclick="runDSP()">DSP</button>
</div>

<div class="row">
<button class="btn" onclick="saveData()">Save</button>
<button class="btn" onclick="clearPlot()">Clear</button>
</div>

<canvas id="spec"></canvas>

<div id="result" class="pass">READY</div>
<div class="small" id="confidence"></div>

</div>

<script>

const canvas = document.getElementById("spec");
const ctx = canvas.getContext("2d");

canvas.width=320;
canvas.height=150;

function drawSpectrum(arr){

    ctx.clearRect(0,0,canvas.width,canvas.height);

    let max=Math.max(...arr);

    for(let i=0;i<arr.length;i++){
        let h=(arr[i]/max)*140;
        ctx.fillRect(i*4,150-h,3,h);
    }
}

function noiseCheck(){

    let noise=Math.random()*100;

    if(noise>50){
        result.innerHTML="HIGH NOISE";
        result.className="fail";
    }else{
        result.innerHTML="NOISE OK";
        result.className="pass";
    }
}

function runDSP(){

    // fake FFT data for demo
    let spectrum=[];
    for(let i=0;i<80;i++){
        spectrum.push(Math.random()*100 + (i>20 && i<30 ? 200:0));
    }

    drawSpectrum(spectrum);

    // fake decision
    let good=Math.random()>0.4;

    if(good){
        result.innerHTML="SCREEN OK";
        result.className="pass";
        confidence.innerHTML="Confidence: 95%";
    }else{
        result.innerHTML="SCREEN DAMAGED";
        result.className="fail";
        confidence.innerHTML="Confidence: 92%";
    }
}

function saveData(){
    alert("Recording saved (demo)");
}

function clearPlot(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    result.innerHTML="READY";
    confidence.innerHTML="";
}

</script>

</body>
</html>
